<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JKC - Just Keep Creating</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script src="/js/script.js" defer></script>
</head>

<body>
    <div class="mesh-background"></div>

    <!-- Control Panel -->
    <div class="control-panel">
        <button class="control-btn" id="themeToggle" title="Toggle theme">üåô</button>
        <button class="control-btn" id="helpToggle" title="Help">‚ùì</button>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="brand-logo">JKC</div>
            <div class="brand-tagline">Just Keep Creating</div>
            <p class="header-subtitle">Transform your ideas into reality with beautiful task management</p>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalTasks">0</div>
                    <div class="stat-label">Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="completedTasks">0</div>
                    <div class="stat-label">Done</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="inProgressTasks">0</div>
                    <div class="stat-label">Active</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="board">
            <!-- To Do Column -->
            <div class="column" data-column="todo" id="todo">
                <div class="column-header">
                    <div class="column-title">
                        <div class="column-icon">üìù</div>
                        <span>To Do</span>
                    </div>
                    <div class="column-count">0</div>
                </div>
                <div class="task-list">
                    <div class="add-task" onclick="openTaskModal('todo')">
                        <div class="add-task-content">
                            <div class="add-task-icon">+</div>
                            <div class="add-task-text">Add Task</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- In Progress Column -->
            <div class="column" data-column="progress" id="progress">
                <div class="column-header">
                    <div class="column-title">
                        <div class="column-icon">üîÑ</div>
                        <span>In Progress</span>
                    </div>
                    <div class="column-count">0</div>
                </div>
                <div class="task-list">
                    <div class="add-task" onclick="openTaskModal('progress')">
                        <div class="add-task-content">
                            <div class="add-task-icon">+</div>
                            <div class="add-task-text">Add Task</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Done Column -->
            <div class="column" data-column="done" id="done">
                <div class="column-header">
                    <div class="column-title">
                        <div class="column-icon">‚úÖ</div>
                        <span>Done</span>
                    </div>
                    <div class="column-count">0</div>
                </div>
                <div class="task-list">
                    <div class="add-task" onclick="openTaskModal('done')">
                        <div class="add-task-content">
                            <div class="add-task-icon">+</div>
                            <div class="add-task-text">Add Task</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Modal -->
    <div class="modal" id="taskModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeTaskModal()">&times;</button>
            <h2 class="modal-title" id="modalTitle">Create New Task</h2>
            <form class="form" id="taskForm">
                <input type="hidden" id="taskId">
                <input type="hidden" id="taskColumn">

                <div class="form-group">
                    <label class="form-label" for="taskTitle">Title</label>
                    <input type="text" id="taskTitle" class="form-input" required placeholder="Enter task title">
                </div>

                <div class="form-group">
                    <label class="form-label" for="taskDescription">Description</label>
                    <textarea id="taskDescription" class="form-textarea" rows="3"
                        placeholder="Enter task description"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label" for="taskDeadline">Deadline</label>
                    <input type="datetime-local" id="taskDeadline" class="form-input">
                </div>

                <div class="form-group">
                    <label class="form-label">Color</label>
                    <div class="color-picker-container">
                        <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 8px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="radio" name="colorOption" value="default" id="defaultColor" checked
                                    style="margin: 0;">
                                <span style="font-size: 14px;">Use column color</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="radio" name="colorOption" value="custom" id="customColor"
                                    style="margin: 0;">
                                <span style="font-size: 14px;">Custom color</span>
                            </label>
                        </div>
                        <div id="colorPickerSection" style="display: none;">
                            <input type="color" id="taskColor" class="color-picker" value="#007AFF">
                            <span style="color: var(--text-tertiary); font-size: 14px; margin-left: 12px;">Choose a
                                custom color</span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="taskImage">Image</label>
                    <input type="file" id="taskImage" class="form-input" accept="image/*">
                </div>

                <div class="btn-group">
                    <button type="button" class="btn btn-secondary" onclick="closeTaskModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="submitBtn">Create Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal success-modal" id="successModal">
        <div class="modal-content">
            <div class="lottie-container" id="successAnimation">
                <div style="font-size: 48px; color: var(--success);">‚úÖ</div>
            </div>
            <div class="success-message" id="successMessage">Task Created!</div>
            <div class="success-description" id="successDescription">Your task has been added successfully</div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal delete-modal" id="deleteModal">
        <div class="modal-content">
            <div class="delete-icon">üóëÔ∏è</div>
            <div class="delete-title">Delete Task?</div>
            <div class="delete-description">This action cannot be undone.</div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
                <button class="btn" style="background: var(--error); color: white;"
                    onclick="confirmDelete()">Delete</button>
            </div>
        </div>
    </div>

    <!-- Task Details Modal -->
    <div class="modal task-details-modal" id="taskDetailsModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeTaskDetailsModal()">&times;</button>

            <div class="task-details-header">
                <div>
                    <div class="task-details-title" id="detailsTaskTitle">Task Title</div>
                    <div class="task-details-meta">
                        <span id="detailsTaskColumn">üìù To Do</span>
                        <span id="detailsTaskDeadline">üìÖ No deadline</span>
                        <span id="detailsTaskCreated">‚è∞ Created today</span>
                    </div>
                </div>
                <div class="task-actions">
                    <button class="task-btn edit" onclick="editTaskFromDetails()" title="Edit">‚úèÔ∏è</button>
                    <button class="task-btn delete" onclick="deleteTaskFromDetails()" title="Delete">üóëÔ∏è</button>
                </div>
            </div>

            <div class="task-details-description" id="detailsTaskDescription">
                Task description will appear here...
            </div>

            <div id="detailsTaskImage" style="margin-bottom: 24px;"></div>

            <!-- Subtasks Section -->
            <div class="task-details-section">
                <div class="section-title">
                    ‚úÖ Subtasks
                    <span id="subtaskProgress"
                        style="font-size: 14px; color: var(--text-tertiary); margin-left: auto;">0/0 completed</span>
                </div>

                <div class="subtask-input-group">
                    <input type="text" class="subtask-input" id="newSubtaskInput" placeholder="Add a subtask..."
                        maxlength="100">
                    <button class="add-subtask-btn" onclick="addSubtask()">Add</button>
                </div>

                <div class="subtasks-list" id="subtasksList">
                    <!-- Subtasks will be rendered here -->
                </div>
            </div>

            <!-- Comments Section -->
            <div class="task-details-section">
                <div class="section-title">üí¨ Comments</div>

                <div class="comment-input-group">
                    <textarea class="comment-input" id="newCommentInput" placeholder="Add a comment..."
                        maxlength="500"></textarea>
                    <button class="add-comment-btn" onclick="addComment()">Add Comment</button>
                </div>

                <div class="comments-list" id="commentsList">
                    <!-- Comments will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal help-modal" id="helpModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeHelpModal()">&times;</button>
            <h2 class="modal-title">üöÄ Welcome to JKC</h2>

            <div class="help-section">
                <h3>‚ú® Just Keep Creating</h3>
                <p>JKC is your creative productivity companion, designed to help you turn ideas into reality:</p>
                <ul>
                    <li><strong>To Do:</strong> Capture and organize your creative ideas</li>
                    <li><strong>In Progress:</strong> Track your active projects and tasks</li>
                    <li><strong>Done:</strong> Celebrate your completed creations</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>‚ûï Creating Tasks</h3>
                <p>Click "Add Task" in any column to create a new task. Customize with:</p>
                <ul>
                    <li>Title and description for your creative projects</li>
                    <li>Deadline dates to keep your momentum</li>
                    <li>Custom colors for organization and inspiration</li>
                    <li>Image attachments for visual context</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>üîÑ Managing Your Creative Flow</h3>
                <ul>
                    <li><strong>View Details:</strong> Click on any task to see full details, subtasks, and comments
                    </li>
                    <li><strong>Move:</strong> Use the drag handle (‚ãÆ‚ãÆ) to drag between columns</li>
                    <li><strong>Edit:</strong> Click the pencil icon to modify tasks</li>
                    <li><strong>Delete:</strong> Click the trash icon to remove tasks</li>
                    <li><strong>Subtasks:</strong> Break down big projects into smaller, manageable pieces</li>
                    <li><strong>Comments:</strong> Add notes, updates, and collaborate on tasks</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>üí° Creative Pro Tips</h3>
                <ul>
                    <li>Use colors to categorize by project type or priority</li>
                    <li>Your creative work is automatically saved</li>
                    <li>Switch between light and dark themes for comfort</li>
                    <li>Watch your creative progress with real-time stats</li>
                    <li>Add images to visualize your projects and ideas</li>
                </ul>
            </div>
        </div>
    </div>
</body>

</html>